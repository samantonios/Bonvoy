<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <title>Bonvoy Value</title>
  <style>
    body { font-family: -apple-system, system-ui, sans-serif; margin: 18px; line-height: 1.25; }
    h1 { font-size: 20px; margin: 0 0 12px; }
    .card { border: 1px solid #ddd; border-radius: 12px; padding: 14px; margin: 12px 0; }
    label { display:block; font-size: 14px; margin: 10px 0 6px; }
    input, select { width: 100%; font-size: 16px; padding: 10px; border-radius: 10px; border: 1px solid #ccc; }
    .row { display:flex; gap:10px; }
    .row > div { flex:1; }
    .out { font-size: 16px; margin-top: 10px; }
    .mono { font-variant-numeric: tabular-nums; }
    .small { color:#666; font-size:12px; margin-top:10px; }
  </style>
</head>
<body>
  <h1>Bonvoy Points ↔ Dollar Value</h1>

  <div class="card">
    <label>Mode</label>
    <select id="mode">
      <option value="p2$">Points → Dollars</option>
      <option value="$2p">Dollars → Points</option>
    </select>

    <label id="inputLabel">Bonvoy points</label>
    <input id="inputValue" type="number" inputmode="numeric" min="0" step="1000" value="200000" />

    <div class="row">
      <div>
        <label>Low (¢/pt)</label>
        <input id="low" type="number" inputmode="decimal" min="0.1" step="0.1" value="0.5" />
      </div>
      <div>
        <label>Typical (¢/pt)</label>
        <input id="typ" type="number" inputmode="decimal" min="0.1" step="0.1" value="0.7" />
      </div>
      <div>
        <label>High (¢/pt)</label>
        <input id="high" type="number" inputmode="decimal" min="0.1" step="0.1" value="1.0" />
      </div>
    </div>

    <div class="out mono" id="output"></div>
    <div class="small">Tip: Typical = your “expected” value; low/high show a realistic range.</div>
  </div>

  <script>
    const $ = (id) => document.getElementById(id);

    function fmtMoney(x) {
      return x.toLocaleString(undefined, { style: "currency", currency: "USD", maximumFractionDigits: 0 });
    }
    function fmtPts(x) {
      return Math.round(x).toLocaleString() + " pts";
    }

    function recalc() {
      const mode = $("mode").value;
      const val = parseFloat($("inputValue").value || "0");

      // cents per point -> dollars per point
      const low = parseFloat($("low").value || "0") / 100;
      const typ = parseFloat($("typ").value || "0") / 100;
      const high = parseFloat($("high").value || "0") / 100;

      if (!(low > 0 && typ > 0 && high > 0)) {
        $("output").textContent = "Enter positive values for cents/point.";
        return;
      }
      if (!(low <= typ && typ <= high)) {
        $("output").textContent = "Make sure Low ≤ Typical ≤ High.";
        return;
      }

      if (mode === "p2$") {
        $("inputLabel").textContent = "Bonvoy points";
        const low$ = val * low;
        const typ$ = val * typ;
        const high$ = val * high;
        $("output").innerHTML =
          `<b>Estimated value</b><br>
           Low: ${fmtMoney(low$)}<br>
           Typical: ${fmtMoney(typ$)}<br>
           High: ${fmtMoney(high$)}`
      } else {
        $("inputLabel").textContent = "Cash price (USD)";
        // Best case uses higher cpp => fewer points required
        const bestPts = val / high;
        const typPts  = val / typ;
        const worstPts = val / low;
        $("output").innerHTML =
          `<b>Estimated points needed</b><br>
           Best-case: ${fmtPts(bestPts)}<br>
           Typical: ${fmtPts(typPts)}<br>
           Worst-case: ${fmtPts(worstPts)}`
      }
    }

    ["mode","inputValue","low","typ","high"].forEach(id => $(id).addEventListener("input", recalc));
    recalc();
  </script>
</body>
</html>
